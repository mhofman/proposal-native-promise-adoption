import{_ as o,I as F}from"./slidev/default-VmPQWQut.js";import{a as p}from"./slidev/CodeBlockWrapper.vue_vue_type_script_setup_true_lang-CBbhyVNu.js";import{b as d,o as g,w as e,g as s,e as a,ad as i,m as u,v as c,x as E,T as n}from"./modules/vue-STI-qBJL.js";import{u as m,f as y}from"./slidev/context-C5fve2nS.js";import"./index-3na1HHvW.js";import"./modules/shiki-AMahFDKN.js";import"./modules/unplugin-icons-iX1xcvn8.js";const w={__name:"2025-09-pr-3689.md__slidev_3",setup(f){const{$clicksContext:r,$frontmatter:h}=m();return r.setup(),(C,t)=>{const k=p,l=o;return g(),d(F,c(E(n(y)(n(h),2))),{default:e(()=>[t[3]||(t[3]=s("h1",null,"Whatâ€™s happening ?",-1)),t[4]||(t[4]=s("p",null,[s("code",null,"Await"),i(" uses "),s("code",null,"PromiseResolve"),i(" to coerce the value to a "),s("code",null,"%Promise%"),i(" (that it can internally react to)")],-1)),a(k,u({},{title:"",ranges:["*","*","3-4"]}),{default:e(()=>[...t[0]||(t[0]=[s("pre",{class:"shiki shiki-themes github-dark-default github-light-default slidev-code",style:{"--shiki-dark":"#e6edf3","--shiki-light":"#1f2328","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#ffffff"}},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}},"function"),s("span",{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"}}," PromiseResolve"),s("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},"("),s("span",{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"}},"C"),s("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},", "),s("span",{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"}},"x"),s("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},") {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}},"  if"),s("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}}," ("),s("span",{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"}},"IsPromise"),s("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},"(x)) {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}},"    const"),s("span",{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"}}," xConstructor"),s("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}}," ="),s("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}}," x."),s("span",{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"}},"constructor"),s("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}},"    if"),s("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}}," (xConstructor "),s("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}},"==="),s("span",{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"}}," C"),s("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},") "),s("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}},"return"),s("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}}," x;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},"  }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}},"  return"),s("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}}," new"),s("span",{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"}}," C"),s("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},"("),s("span",{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"}},"resolve"),s("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}}," =>"),s("span",{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"}}," resolve"),s("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},"(x));")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},"}")])])],-1)])]),_:1},16),a(l,{at:"1"},{default:e(()=>[...t[1]||(t[1]=[s("p",null,[i("It was extracted from the original implementation of "),s("code",null,"Promise.resolve"),i(", described as:")],-1),s("blockquote",null,[s("p",null,"This function returns either a new promise resolved with the passed argument, or the argument itself if the argument is a promise produced by this constructor.")],-1)])]),_:1}),t[5]||(t[5]=s("br",null,null,-1)),a(l,{at:"2"},{default:e(()=>[...t[2]||(t[2]=[s("p",null,[i('The check was meant as a sort of strict "instanceof" but uses '),s("code",null,".constructor"),i(".")],-1),s("p",null,"Besides interfering with native promise adoption, user code can also observe whenever a native promise is being handled (e.g. by using a getter).",-1)])]),_:1})]),_:1},16)}}};export{w as default};
